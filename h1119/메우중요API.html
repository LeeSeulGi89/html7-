<!-- 
    ==========================================
    관광 사진 갤러리 프로그램
    ==========================================
    기능: 공공데이터 API를 사용하여 관광 사진 정보를 가져와 화면에 표시
    사용 기술: HTML, CSS, jQuery, AJAX
    ==========================================
-->
<!DOCTYPE html>
<!-- HTML 문서의 시작을 선언 (HTML5 버전) -->
<html lang="en">
<!-- lang="en": 문서의 주 언어가 영어임을 선언 -->
<head>
    <!-- 문서의 메타데이터 영역 시작 -->
    
    <!-- 문자 인코딩을 UTF-8로 설정 (한글 포함 모든 언어 표현 가능) -->
    <meta charset="UTF-8">
    
    <!-- 반응형 웹을 위한 뷰포트 설정 (모바일 대응) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- jQuery 라이브러리 불러오기 (AJAX 통신과 DOM 조작을 위해 필수) -->
    <!-- CDN 방식으로 인터넷에서 jQuery 파일을 가져옴 -->
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    
    <!-- 브라우저 탭에 표시될 제목 -->
    <title>학생성적프로그램</title>
    
    <!-- ========== CSS 스타일 영역 ========== -->
    <style>
        /* 테이블, 테이블 헤더(th), 테이블 셀(td)에 공통 스타일 적용 */
        table, th, td {
            border: 1px solid black;        /* 1px 두께의 검은색 실선 테두리 */
            border-collapse: collapse;      /* 테두리를 하나로 합침 (이중선 제거) */
        }
        
        /* 테이블 전체 너비 설정 */
        table {
            width: 1200px;                  /* 테이블 너비를 1200px로 고정 */
        }
        
        /* 테이블 헤더와 셀의 크기 및 정렬 */
        th, td {
            height: 40px;                   /* 각 셀의 높이를 40px로 설정 */
            text-align: center;             /* 텍스트를 가운데 정렬 */
        }
        
        /* 테이블 안의 이미지 크기 조정 */
        img {
            width: 100px;                   /* 이미지 너비를 100px로 제한 */
        }
    </style>
    
    <!-- ========== JavaScript 영역 (jQuery 사용) ========== -->
    <script>
        // ==========================================
        // jQuery 시작 - 문서가 준비되면 실행
        // ==========================================
        $(function() {
            // $(function() {}): 문서가 완전히 로드된 후 실행
            // HTML이 모두 준비되면 이 안의 코드가 실행됩니다
            
            // ==========================================
            // "데이터 가져오기" 버튼 클릭 이벤트
            // ==========================================
            $("#takeBtn").click(function() {
                // $("#takeBtn"): ID가 "takeBtn"인 버튼 요소를 선택
                // .click(): 버튼을 클릭했을 때 실행할 함수 등록
                
                // ==========================================
                // AJAX 통신 시작
                // AJAX: 페이지 새로고침 없이 서버와 데이터를 주고받는 기술
                // ==========================================
                $.ajax({
                    // $.ajax({}): jQuery의 AJAX 메서드
                    
                    // API 주소 (공공데이터포털의 관광 사진 갤러리 API)
                    url: "https://apis.data.go.kr/B551011/PhotoGalleryService1/galleryList1?serviceKey=918RE13GA7OY7ZEmUzApgbOeAcQoZ%2FaHsXWcqPAKQ9YNNPj83KOstRMRIUrCFIAcm9qj2R6b7NFZjp%2FYsYzJLg%3D%3D&numOfRows=10&pageNo=1&MobileOS=ETC&MobileApp=AppTest&arrange=A&_type=json",
                    // url: 데이터를 가져올 서버 주소
                    // serviceKey: 공공데이터 사용 인증키
                    // numOfRows=10: 10개의 데이터를 가져옴
                    // pageNo=1: 첫 번째 페이지
                    // _type=json: JSON 형식으로 데이터 요청
                    
                    // HTTP 요청 방식 (GET: 데이터 조회, POST: 데이터 전송)
                    type: "get",
                    
                    // 서버로 보낼 추가 데이터 (현재는 URL에 모두 포함되어 있어 비어있음)
                    data: {},
                    
                    // 응답받을 데이터 타입 (json: JavaScript 객체 형태)
                    dataType: "json",
                    
                    // ==========================================
                    // 성공했을 때 실행되는 함수
                    // ==========================================
                    success: function(data) {
                        // data: 서버에서 받아온 데이터
                        // function(data): 콜백 함수 (데이터를 받으면 자동으로 실행)
                        
                        // 성공 메시지 알림창 표시
                        alert("성공");
                        
                        // 콘솔에 받아온 데이터 출력 (개발자 도구에서 확인 가능)
                        console.log(data.response.body.items.item);
                        // data.response.body.items.item: JSON 경로
                        // - data: 전체 응답 데이터
                        // - response: 응답 객체
                        // - body: 본문 데이터
                        // - items: 항목들
                        // - item: 실제 사진 정보 배열 (10개)
                        
                        // 사진 데이터 배열을 변수에 저장
                        var tour_data = data.response.body.items.item;
                        // tour_data: 관광 사진 정보 10개가 담긴 배열
                        
                        // HTML을 저장할 빈 문자열 변수 선언
                        var dataHtml = ``;
                        // 백틱(``)을 사용하면 여러 줄 문자열과 변수 삽입 가능
                        
                        // ==========================================
                        // 반복문: 배열의 모든 데이터를 순회하며 HTML 생성
                        // ==========================================
                        for (var i = 0; i < tour_data.length; i++) {
                            // for문: i가 0부터 시작해서 데이터 개수만큼 반복
                            // i = 0: 첫 번째 데이터
                            // i < tour_data.length: 배열 길이(10)보다 작을 때까지
                            // i++: 반복할 때마다 i를 1씩 증가
                            
                            // += 연산자로 HTML 문자열을 계속 이어붙임
                            dataHtml += `
                                <tr id="${tour_data[i].galContentId}">
                                    <!-- tr: 테이블 행(row) 시작 -->
                                    <!-- id="${tour_data[i].galContentId}": 각 행에 고유 ID 부여 -->
                                    <!-- ${변수명}: 변수 값을 문자열에 삽입 (템플릿 리터럴) -->
                                    
                                    <td>${tour_data[i].galContentId}</td>
                                    <!-- td: 테이블 셀(cell) -->
                                    <!-- galContentId: 콘텐츠 번호 -->
                                    
                                    <td>${tour_data[i].galTitle}</td>
                                    <!-- galTitle: 사진 제목 -->
                                    
                                    <td>${tour_data[i].galCreatedtime}</td>
                                    <!-- galCreatedtime: 촬영 날짜 -->
                                    
                                    <td>${tour_data[i].galPhotographyLocation}</td>
                                    <!-- galPhotographyLocation: 촬영 장소 -->
                                    
                                    <td>${tour_data[i].galPhotographer}</td>
                                    <!-- galPhotographer: 사진 작가 -->
                                    
                                    <td>${tour_data[i].galSearchKeyword}</td>
                                    <!-- galSearchKeyword: 검색 키워드 -->
                                    
                                    <td><img src="${tour_data[i].galWebImageUrl}"></td>
                                    <!-- img src: 이미지 주소 -->
                                    <!-- galWebImageUrl: 웹용 이미지 URL -->
                                   
                                </tr>
                            `;
                            // 이 과정을 10번 반복하여 10개의 행(tr)이 생성됨
                        }

                        // 생성된 HTML을 테이블의 tbody에 삽입
                        $("#tbody").html(dataHtml);
                        // $("#tbody"): ID가 "tbody"인 요소 선택
                        // .html(dataHtml): 선택한 요소의 내용을 dataHtml로 교체
                        // 기존 내용은 사라지고 새로운 데이터가 표시됨

                    }, // success 함수 끝
                    
                    // ==========================================
                    // 실패했을 때 실행되는 함수
                    // ==========================================
                    error: function() {
                        // 네트워크 오류, 잘못된 URL, 서버 오류 등의 경우 실행
                        alert("실패");
                        // 실패 메시지 알림창 표시
                    }
                    
                }); // ajax 끝
                
            }); // takeBtn 클릭 이벤트 끝
            
        }); // jQuery 준비 함수 끝

    </script>
</head>

<!-- ========== HTML 본문 시작 ========== -->
<body>
    <!-- body: 브라우저에 실제로 표시되는 내용 영역 -->
    
    <!-- ==========================================
         데이터 가져오기 버튼
         ========================================== -->
    <button type="button" id="takeBtn">데이터 가져오기</button>
    <!-- button: 클릭 가능한 버튼 -->
    <!-- type="button": 일반 버튼 (form 제출 안 함) -->
    <!-- id="takeBtn": JavaScript에서 이 버튼을 찾기 위한 고유 식별자 -->
    
    <!-- ==========================================
         데이터 입력 폼 (현재 사용되지 않음)
         ========================================== -->
    <form action="#" method="get">
        <!-- form: 사용자 입력을 서버로 전송하는 양식 -->
        <!-- action="#": 제출 시 이동할 주소 (# = 현재 페이지) -->
        <!-- method="get": 데이터를 URL에 포함하여 전송 -->
        
        <label>번호</label>
        <!-- label: 입력 필드의 설명 텍스트 -->
        <input type="text" id="sno" name="sno"><br>
        <!-- input: 사용자 입력 필드 -->
        <!-- type="text": 텍스트 입력 -->
        <!-- id="sno": JavaScript에서 접근하기 위한 ID -->
        <!-- name="sno": 서버로 전송 시 사용되는 이름 -->
        <!-- <br>: 줄바꿈 -->
        
        <label>제목</label>
        <input type="text" id="name" name="name"><br>
        
        <label>촬영일</label>
        <input type="text" id="kor" name="kor"><br>
        
        <label>촬영지역</label>
        <input type="text" id="eng" name="eng"><br>
        
        <label>작가</label>
        <input type="text" id="math" name="math" onkeyup="enterBtn(event)"><br>
        <!-- onkeyup="enterBtn(event)": 키를 눌렀다 뗄 때 enterBtn 함수 실행 -->
        <!-- 현재 enterBtn 함수가 정의되지 않아 오류 발생 가능 -->
        
        <button type="button" id="sbtn" onclick="saveBtn()">성적저장</button>
        <!-- onclick="saveBtn()": 클릭 시 saveBtn 함수 실행 -->
        <!-- 현재 saveBtn 함수가 정의되지 않아 오류 발생 가능 -->
    </form>
    
    <!-- ==========================================
         데이터 표시 테이블
         ========================================== -->
    <table>
        <!-- table: 표 형태로 데이터 표시 -->
        
        <tr>
            <!-- tr: 테이블 행(가로줄) -->
            <!-- 첫 번째 행은 헤더(제목) 역할 -->
            
            <th>번호</th>
            <!-- th: 테이블 헤더 셀 (진하게 표시됨) -->
            <th>제목</th>
            <th>촬영일</th>
            <th>촬영장소</th>
            <th>작가</th>
            <th>키워드</th>
            <th>이미지</th>
        </tr>
        
        <tbody id="tbody">
            <!-- tbody: 테이블의 본문 영역 -->
            <!-- id="tbody": JavaScript에서 데이터를 삽입할 위치 -->
            <!-- AJAX로 받아온 데이터가 여기에 들어갑니다 -->
            
            <!-- 처음에는 비어있고, "데이터 가져오기" 버튼을 클릭하면 채워짐 -->
            
        </tbody>

    </table>
    <!-- 테이블에는 헤더 행 1개 + 데이터 행 10개 = 총 11개 행이 표시됨 -->
   
   
</body>
</html>